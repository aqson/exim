<!doctype html>
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset='utf8'>
  <title>Exim Test Suite</title>
  <script src="./bower_components/jquery/dist/jquery.js"></script>
  <script src="./bower_components/bluebird/js/browser/bluebird.js"></script>
  <script src="./bower_components/react/react.js"></script>
  <script src="exim.js"></script>
  <script type="text/javascript">
  window.appExim = Exim.create({
    name: 'a',
    initial: function() { return {} },
    actions: {
      fetch: function() {
        return new Promise(function(r, f){
          console.log(2)
          return f('hallo')
        });
      }
    },
    before: {
      fetch: function (msg) {
        console.log(1);
        this.set('msg', msg);
      }
    },
    after: {
      fetch: function (msg) {
        console.log(3);
        console.log(msg);
        this.set('msg', msg)
      }
    },
    failed: {
      fetch: function () {
        console.log('failed!');
      }
    }
  })
  </script>
</head>
<body>
</body>
</html>
